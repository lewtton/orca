(this.webpackJsonppoker=this.webpackJsonppoker||[]).push([[0],{18:function(e,t,n){e.exports=n(19)},19:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(3),l=n(6),i=n(4),s=n(7),c=n(0),u=n.n(c),o=n(17),d=n.n(o),h=n(5),p=n.n(h),m=(n(41),["card suitspades","card suithearts","card suitclubs","card suitdiamonds","card","cardsel suitspades","cardsel suithearts","cardsel suitclubs","cardsel suitdiamonds","cardsel"]),f=["A","2","3","4","5","6","7","8","9","10","J","Q","K","\u5c0f","\u5927","\u80dc","\u8d25"],v=4,y=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:this.props.className,onClick:function(){return e.props.onClick()}},u.a.createElement("p",null,f[this.props.value]))}}]),t}(u.a.Component),b=function(e){function t(){return Object(a.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:this.props.className},u.a.createElement("p",null,f[this.props.value]))}}]),t}(u.a.Component),k=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).state={players:["\u4e1c","\u5317","\u897f","\u5357"],userid:0,holdid:1,cardvalue:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1],[2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3]],cardcur:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],isSel:Array(16).fill(!1)},n.intervalId=setInterval((function(){n.syncData()}),200),n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"syncTest",value:function(){var e=this.state.cardvalue,t=e.shift();e.push(t),this.setState({cardvalue:e})}},{key:"componentWillMount",value:function(){this.initData(99)}},{key:"serialize",value:function(e){}},{key:"syncData",value:function(){var e=this,t=new FormData;t.append("sync",1),p()({method:"post",url:"apipk/",data:t}).then((function(t){var n=t.data,a=e.state.userid,r=[],l=0,i=[];for(i=n.cards;l<a;l++)r=i.shift(),i.push(r);e.setState({holdid:n.hold,cardvalue:i,cardcur:n.cur})})).catch((function(e){console.log(e)}))}},{key:"initData",value:function(e){var t=new FormData;t.append("init",e),t.append("pnum",v),console.log(t);var n=this;p()({method:"post",url:"apipk/",data:t}).then((function(e){var t=e.data;console.log(t);for(var a,r=t.userid,l=0;l<r;l++)a=t.players.shift(),t.players.push(a);n.setState({players:t.players,userid:t.userid,holdid:t.holdid})})).catch((function(e){console.log(e)}))}},{key:"toSuit",value:function(e){p()({method:"post",url:"apipk/",data:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){console.log(e)}))}},{key:"btn_call",value:function(){for(var e=this.state.isSel.slice(),t=[],n=[],a=0,r=this.state.isSel.length;a<r;a++)e[a]&&(n.push(a),t.push(this.state.cardvalue[0][a]));if(n.length>0){var l=new FormData;l.append("suit",1),l.append("num",n),l.append("card",t),this.toSuit(l);var i=Array(16).fill(!1);this.setState({isSel:i})}else console.log("\u6ca1\u6709\u9009\u724c")}},{key:"btn_recall",value:function(){var e=new FormData;e.append("suit",2),this.toSuit(e),console.log("\u53d6\u56de\u724c")}},{key:"btn_update",value:function(){this.syncData(),console.log("\u624b\u52a8\u540c\u6b65\u6570\u636e")}},{key:"btn_start",value:function(){this.initData(4)}},{key:"btn_end",value:function(){this.initData(0)}},{key:"btn_turn",value:function(){var e=new FormData;e.append("suit",3),this.toSuit(e)}},{key:"btn_next",value:function(){var e=new FormData;e.append("suit",4),this.toSuit(e)}},{key:"btn_card",value:function(e){var t=this.state.isSel.slice();t[e]=!this.state.isSel[e],this.setState({isSel:t})}},{key:"btn_setnum",value:function(e,t){v=t,document.getElementById("curmode").innerHTML=document.getElementById("lilist").children[e].innerHTML}},{key:"renderYard",value:function(e,t){var n=e%4,a=Math.floor(e/4);return e>51?(n=4,a=e-39):(n=e%4,a=Math.floor(e/4)),u.a.createElement(b,{value:a,key:t,className:m[n]})}},{key:"renderCard",value:function(e,t){var n=this,a=e%4,r=Math.floor(e/4);return e>51?(a=4,r=e-39):(a=e%4,r=Math.floor(e/4)),this.state.isSel[t]&&(a+=5),u.a.createElement(y,{value:r,key:t,className:m[a],onClick:function(){return n.btn_card(t)}})}},{key:"renderMantainer",value:function(){var e=this;if(0===this.state.userid)return u.a.createElement(c.Fragment,null,u.a.createElement("button",{onClick:function(){return e.btn_start()}},"\u65b0\u5c40"),u.a.createElement("div",{class:"drop-box"},u.a.createElement("p",{class:"txt",id:"curmode"},"\u56db\u4eba\u5c40"),u.a.createElement("ul",{class:"menu",id:"lilist"},u.a.createElement("li",{sort:"0",onClick:function(){return e.btn_setnum(0,4)}},"\u56db\u4eba\u5c40"),u.a.createElement("li",{sort:"1",onClick:function(){return e.btn_setnum(1,3)}},"\u4e09\u4eba\u5c40"),u.a.createElement("li",{sort:"2",onClick:function(){return e.btn_setnum(2,2)}},"\u4e24\u4eba\u5c40"))))}},{key:"renderZone",value:function(e,t){if(t<3)return u.a.createElement("div",{class:"player_ot"},u.a.createElement("h3",null,"\u5bf9\u5bb6\u540d\u79f0\uff1a",this.state.players[3-t]),u.a.createElement("h2",null,"\u5269\u4f59\u724c\u6570\uff1a",this.state.cardvalue[3-t].length))}},{key:"renderHold",value:function(){var e=this;return this.state.holdid===this.state.userid?u.a.createElement(c.Fragment,null,u.a.createElement("button",{onClick:function(){return e.btn_call()}},"\u51fa\u724c"),u.a.createElement("button",{onClick:function(){return e.btn_next()}},"\u4e0d\u51fa")):u.a.createElement(c.Fragment,null,u.a.createElement("button",{onClick:function(){return e.btn_turn()}},"\u52fe\u53c9"),u.a.createElement("button",{onClick:function(){return e.btn_turn()}},"\u8f6e\u503c"))}},{key:"render",value:function(){var e=this;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{id:"palyers_zone"},this.state.players.map((function(t,n){return e.renderZone(t,n)})),u.a.createElement("button",{onClick:function(){return e.btn_update()}},"\u5237\u65b0"),u.a.createElement("button",{onClick:function(){return e.btn_recall()}},"\u53d6\u56de"),this.renderMantainer()),u.a.createElement("div",{id:"player_yard"},u.a.createElement("div",{id:"cur_mani"},u.a.createElement("h3",null,"\u6267\u884c\u64cd\u4f5c\uff1a"),this.renderHold()),u.a.createElement("div",{id:"cur_card"},u.a.createElement("h2",null,"\u5f53\u524d\u51fa\u724c\uff1a"),this.state.cardcur.map((function(t,n){return e.renderYard(t,n)})))),u.a.createElement("div",{id:"player_me"},u.a.createElement("p",null,u.a.createElement("h2",null,"\u5f53\u524d\u73a9\u5bb6\uff1a",this.state.players[0],"\uff0c\u70b9\u51fb\u4e0b\u65b9\u5361\u724c\uff0c\u5176\u53d8\u84dd\u540e\uff0c\u70b9\u51fb\u51fa\u724c\u6309\u94ae\u3002")),this.state.cardvalue[0].map((function(t,n){return e.renderCard(t,n,"Card")}))))}}]),t}(u.a.Component);d.a.render(u.a.createElement(k,null),document.getElementById("mid"))},41:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.235bc235.chunk.js.map